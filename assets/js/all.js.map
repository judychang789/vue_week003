{"version":3,"sources":["all.js","cart.js","login.js","products.js"],"names":["console","log","$","document","ready","data","apiUrlink","apiPath","products","temp","methods","checkAdmin","url","axios","post","then","getData","err","alert","res","message","window","location","get","openProduct","item","mounted","token","cookie","replace","defaults","headers","common","Authorization","mount","user","username","password","login","api","expired","Date","response","productModal","delete_product","app","tempProducts","imagesUrl","isNew","getProductsData","openModal","status","show","updateProduct","method","id","hide","deleteProduct","bootstrap","Modal"],"mappings":"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","file":"all.js","sourcesContent":["console.log('Hello!');\n\n$(document).ready(() => {\n  console.log('HesSchool Hello!');\n});","import { createApp } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js';\r\n//const { createApp } = Vue;\r\ncreateApp({\r\n  data() {\r\n    return {\r\n      apiUrlink: 'https://vue3-course-api.hexschool.io/v2',\r\n      apiPath: 'apijy_vue',\r\n      products: [],\r\n      //tempProduct: {},\r\n      temp: {},\r\n    }\r\n  },\r\n  methods: {\r\n    checkAdmin() {\r\n      const url = `${this.apiUrlink}/api/user/check`;\r\n      axios.post(url)\r\n        .then(() => {\r\n          this.getData();\r\n        })\r\n        .catch((err) => {\r\n          alert(err.res.data.message)\r\n          window.location = 'login.html';\r\n        })\r\n    },\r\n    getData() {\r\n      const url = `${this.apiUrlink}/api/${this.apiPath}/admin/products`;\r\n      axios.get(url)\r\n        .then((res) => {\r\n          this.products = res.data.products;\r\n        })\r\n        .catch((err) => {\r\n          alert(err.res.data.message);\r\n        })\r\n    },\r\n    openProduct(item) {\r\n      //this.tempProduct = item;\r\n      this.temp = item;\r\n    }\r\n  },\r\n  mounted() {\r\n    // 取出 Token\r\n    const token = document.cookie.replace(/(?:(?:^|.*;\\s*)judyToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\r\n    axios.defaults.headers.common.Authorization = token;\r\n\r\n    this.checkAdmin()\r\n  }\r\n}).mount('#cart');","\r\nimport { createApp } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js';\r\n\r\ncreateApp({\r\n  data(){\r\n    return{\r\n      user:{\r\n        username: \"\",\r\n        password: \"\",\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    // login() {\r\n    //   alert(`你所輸入的帳號是: ${this.username} \\n而你所輸入的密碼是${this.password}`);\r\n    // },\r\n    login(){\r\n      const api = 'https://vue3-course-api.hexschool.io/v2/admin/signin';\r\n      axios.post(api, this.user).then((res)=>{\r\n        const { token , expired } = res.data;\r\n        document.cookie = `judyToken=${token};expires=${new Date(expired)}; path=/`;\r\n        //window.location = 'cart.html';\r\n        window.location = 'products.html';\r\n      })\r\n      .catch((err)=>{\r\n        alert(err.response.data.message);\r\n      })\r\n    }\r\n  }\r\n}).mount(\"#app\");\r\n\r\n\r\n\r\n\r\n// createApp({\r\n//   data() {\r\n//     return {\r\n//       user: {\r\n//         username: '',\r\n//         password: '',\r\n//       },\r\n//     }\r\n//   },\r\n//   methods: {\r\n//     // login() {\r\n//     //   alert(`你所輸入的帳號是: ${this.username} \\n而你所輸入的密碼是${this.password}`);\r\n//     // },\r\n\r\n//     login() {\r\n//       const api = 'https://vue3-course-api.hexschool.io/v2/admin/signin';\r\n//       axios.post(api, this.user).then((response) => {\r\n//         const { token, expired } = response.data;\r\n//         // 寫入 cookie token\r\n//         // expires 設置有效時間\r\n//         document.cookie = `hexToken=${token};expires=${new Date(expired)}; path=/`;\r\n//         window.location = 'cart.html';\r\n//       }).catch((err) => {\r\n//         alert(err.response.data.message);\r\n//       });\r\n//     },\r\n\r\n//   },\r\n// }).mount('#app');\r\n\r\n","import { createApp } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js';\r\n\r\n// const site = 'https://vue3-course-api.hexschool.io/v2/';\r\n// const apiPath  = 'apijy_vue';\r\n\r\n\r\nlet productModal = {};\r\nlet delete_product = {};\r\n\r\n\r\n\r\nconst app = createApp({\r\n    data(){\r\n        return{\r\n            apiUrlink: 'https://vue3-course-api.hexschool.io/v2',\r\n            apiPath: 'apijy_vue',\r\n            products:[] ,\r\n            tempProducts:{\r\n                imagesUrl:[] ,\r\n            },\r\n            isNew:false,  //確認是編輯或新增\r\n        }\r\n    },\r\n     methods: {\r\n        checkAdmin() {\r\n            const url = `${this.apiUrlink}/api/user/check`;\r\n            axios.post(url)\r\n              .then((response) => {\r\n                this.getProductsData();  //this.getData()\r\n              })\r\n              .catch((err) => {\r\n                alert(err.response.data.message)\r\n                window.location = 'login.html';\r\n              })\r\n        },\r\n        getProductsData() {  //getData()\r\n            const url = `${this.apiUrlink}/api/${this.apiPath}/admin/products/all`;\r\n            axios.get(url).then((response) => {\r\n              this.products = response.data.products;\r\n              //console.log(response);\r\n              //console.log(this.products);\r\n            }).catch((err) => {\r\n              alert(err.response.data.message);\r\n            })\r\n        },\r\n        openModal(status ,item){  //status是可自訂的\r\n            //productModal.show();  //會打開\r\n            console.log(status);  //按新增跑出create  按編輯跑出edit \r\n            if(status === \"create\"){\r\n                productModal.show();\r\n                this.isNew = true;\r\n                //帶入初始化資料\r\n                this.tempProducts={\r\n                    imagesUrl:[] ,\r\n                };\r\n            }else if(status === \"edit\"){\r\n                productModal.show();\r\n                this.isNew = false;\r\n                //會帶入當前要編輯的資料\r\n                this.tempProducts={...item};\r\n            }else if(status === \"delete\"){\r\n                delete_product.show();\r\n                this.tempProducts={...item};  //待會取id使用\r\n            }\r\n        },       \r\n        updateProduct() {  //更新產品\r\n            //console.log(\"updateProduct\");\r\n            //console.log(`${this.apiUrlink}/api/${this.apiPath}/admin/product`);\r\n            let url = `${this.apiUrlink}/api/${this.apiPath}/admin/product`;\r\n            let method = \"post\"\r\n\r\n            //用this.isNew判斷api怎麼運行\r\n            if(!this.isNew){\r\n                url = `${this.apiUrlink}/api/${this.apiPath}/admin/product/${this.tempProducts.id}`;\r\n                method = \"put\"\r\n            }\r\n\r\n            // axios.post(url , { data: this.tempProducts })\r\n            axios[method](url , { data: this.tempProducts })  //用method這個變數帶\r\n            .then(response=>{\r\n                console.log(response);\r\n                productModal.hide();  //會關閉\r\n                this.getProductsData();  //更新完產品需重新取得\r\n            })\r\n            // .catch((err)=>{\r\n            //     console.log(err);\r\n            // })\r\n        },\r\n        deleteProduct() {\r\n            const url = `${this.apiUrlink}/api/${this.apiPath}/admin/product/${this.tempProducts.id}`;\r\n            axios.delete(url)  //用method這個變數帶\r\n            .then(response=>{\r\n                // console.log(response);\r\n                this.getProductsData();  //更新完產品需重新取得\r\n                delete_product.hide();  //會關閉\r\n            })\r\n        }\r\n    }, \r\n    mounted() {\r\n        //console.log(`${sitelink}api/${apiPath}/admin/products`)\r\n\r\n        // const cookieValue = document.cookie\r\n        // .split('; ')\r\n        // .find((row) => row.startsWith(\"judyToken=\"))\r\n        // ?.split('=')[1];\r\n\r\n        // 取出 Token\r\n        const token = document.cookie.replace(/(?:(?:^|.*;\\s*)judyToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\r\n        axios.defaults.headers.common.Authorization = token;\r\n\r\n       // this.checkAdmin()     \r\n       this.getProductsData();\r\n\r\n        //bootstrap\r\n        //console.log(bootstrap);\r\n        productModal = new bootstrap.Modal(\"#productModal\");       //新增/編輯的視窗\r\n        delete_product = new bootstrap.Modal(\"#delProductModal\");   //刪除的視窗\r\n        //productModal.show();  //會打開\r\n    }\r\n}).mount('#products');"]}